<section class="content-narrow">
  <h1>Midar tes pled-clav</h1>

  @if (isCodeEmpty) {
    <ngb-alert [type]="'danger'" [dismissible]="false">
      <b>Nagin token</b>
      Il link na cuntegna nagin token.
    </ngb-alert>
  }

  @if (!isCodeEmpty) {
    @if (errorMessage) {
      <ngb-alert [type]="'danger'" [dismissible]="false">
        <b>{{ errorMessage.title }}.</b>
        {{ errorMessage.message }}
      </ngb-alert>
    }
    <form [formGroup]="f" (ngSubmit)="changePassword()">
      <div class="mb-3">
        <label for="password" class="form-label">Pled-clav</label>
        <input type="password" id="password" name="password" class="form-control" formControlName="password"
          [class.is-invalid]="isFieldInvalid('password')">
        @if (isFieldInvalid('password')) {
          <div class="invalid-feedback">
            @if (isFieldError('password', 'required')) {
              Endatescha in pled-clav.
            }
            @if (isFieldError('password', 'minlength')) {
              Il pled-clav sto avair ina lunghezza dad almain 8 caracters.
            }
          </div>
        }
      </div>
      <div class="flex justify-content-end">
        <button type="button" class="clndr accent" (click)="changePassword()">Midar il pled-clav</button>
      </div>
    </form>
  }
</section>
